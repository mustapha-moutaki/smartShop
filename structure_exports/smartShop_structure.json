{
  "project_info": {
    "name": "smartShop",
    "path": "/home/mustapha/IdeaProjects/smartShop",
    "generated_at": "2025-11-28T12:09:28.317893534",
    "total_files": 40,
    "total_size": 53071
  },
  "structure": {
    ".env": {
      "type": "file",
      "info": {
        "size": 238,
        "last_modified": "2025-11-28T12:09:28.038069024",
        "mime_type": "text/plain",
        "extension": ".env"
      }
    },
    ".gitignore": {
      "type": "file",
      "info": {
        "size": 394,
        "last_modified": "2025-11-28T12:09:28.065483749",
        "mime_type": "text/plain",
        "extension": ".gitignore"
      }
    },
    "mvnw": {
      "type": "file",
      "info": {
        "size": 11790,
        "last_modified": "2025-11-28T12:09:28.070700511",
        "mime_type": "application/x-sh",
        "extension": "."
      }
    },
    ".mvn": {
      "wrapper": {
        "maven-wrapper.properties": {
          "type": "file",
          "info": {
            "size": 168,
            "last_modified": "2025-11-28T12:09:28.075450686",
            "mime_type": "text/x-java-properties",
            "extension": ".properties"
          }
        }
      }
    },
    "docker-compose.yml": {
      "type": "file",
      "info": {
        "size": 2915,
        "last_modified": "2025-11-28T12:09:28.085139728",
        "mime_type": "text/x-yaml",
        "extension": ".yml"
      }
    },
    "mvnw.cmd": {
      "type": "file",
      "info": {
        "size": 8292,
        "last_modified": "2025-11-28T12:09:28.090160342",
        "mime_type": "application/x-bat",
        "extension": ".cmd"
      }
    },
    "pom.xml": {
      "type": "file",
      "info": {
        "size": 4719,
        "last_modified": "2025-11-28T12:09:28.095484423",
        "mime_type": "application/xml",
        "extension": ".xml"
      }
    },
    "Dockerfile": {
      "type": "file",
      "info": {
        "size": 336,
        "last_modified": "2025-11-28T12:09:28.116465202",
        "mime_type": "text/plain",
        "extension": "."
      }
    },
    ".gitattributes": {
      "type": "file",
      "info": {
        "size": 38,
        "last_modified": "2025-11-28T12:09:28.12350034",
        "mime_type": "text/plain",
        "extension": ".gitattributes"
      }
    },
    "HELP.md": {
      "type": "file",
      "info": {
        "size": 1684,
        "last_modified": "2025-11-28T12:09:28.128773369",
        "mime_type": "text/x-web-markdown",
        "extension": ".md"
      }
    },
    "src": {
      "main": {
        "resources": {
          "application.yaml": {
            "type": "file",
            "info": {
              "size": 743,
              "last_modified": "2025-11-28T12:09:28.134429495",
              "mime_type": "text/x-yaml",
              "extension": ".yaml"
            }
          },
          "templates": {
          },
          "static": {
          }
        },
        "java": {
          "org": {
            "mustapha": {
              "smartShop": {
                "service": {
                  "impl": {
                    "UserServiceImpl.java": {
                      "type": "file",
                      "info": {
                        "size": 4177,
                        "last_modified": "2025-11-28T12:09:28.147709749",
                        "mime_type": "text/x-java-source",
                        "extension": ".java"
                      }
                    }
                  },
                  "UserService.java": {
                    "type": "file",
                    "info": {
                      "size": 647,
                      "last_modified": "2025-11-28T12:09:28.155034069",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  }
                },
                "config": {
                },
                "model": {
                  "Client.java": {
                    "type": "file",
                    "info": {
                      "size": 981,
                      "last_modified": "2025-11-28T12:09:28.163949395",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  },
                  "Order.java": {
                    "type": "file",
                    "info": {
                      "size": 1093,
                      "last_modified": "2025-11-28T12:09:28.168214869",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  },
                  "Product.java": {
                    "type": "file",
                    "info": {
                      "size": 428,
                      "last_modified": "2025-11-28T12:09:28.17243703",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  },
                  "User.java": {
                    "type": "file",
                    "info": {
                      "size": 858,
                      "last_modified": "2025-11-28T12:09:28.177173748",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  },
                  "PromoCode.java": {
                    "type": "file",
                    "info": {
                      "size": 518,
                      "last_modified": "2025-11-28T12:09:28.181717079",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  }
                },
                "SmartShopApplication.java": {
                  "type": "file",
                  "info": {
                    "size": 322,
                    "last_modified": "2025-11-28T12:09:28.18766597",
                    "mime_type": "text/x-java-source",
                    "extension": ".java"
                  }
                },
                "mapper": {
                  "ClientMapper.java": {
                    "type": "file",
                    "info": {
                      "size": 1764,
                      "last_modified": "2025-11-28T12:09:28.191934219",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  },
                  "UserMapper.java": {
                    "type": "file",
                    "info": {
                      "size": 609,
                      "last_modified": "2025-11-28T12:09:28.196255193",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  }
                },
                "controller": {
                  "UserController.java": {
                    "type": "file",
                    "info": {
                      "size": 1836,
                      "last_modified": "2025-11-28T12:09:28.203064016",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  }
                },
                "enums": {
                  "OrderStatus.java": {
                    "type": "file",
                    "info": {
                      "size": 122,
                      "last_modified": "2025-11-28T12:09:28.209197848",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  },
                  "LoyaltyLevel.java": {
                    "type": "file",
                    "info": {
                      "size": 115,
                      "last_modified": "2025-11-28T12:09:28.213410746",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  },
                  "PaymentStatus.java": {
                    "type": "file",
                    "info": {
                      "size": 109,
                      "last_modified": "2025-11-28T12:09:28.217567401",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  },
                  "UserRole.java": {
                    "type": "file",
                    "info": {
                      "size": 86,
                      "last_modified": "2025-11-28T12:09:28.221597049",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  }
                },
                "exception": {
                  "UnauthorizedException.java": {
                    "type": "file",
                    "info": {
                      "size": 188,
                      "last_modified": "2025-11-28T12:09:28.228740308",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  },
                  "ResourceNotFoundException.java": {
                    "type": "file",
                    "info": {
                      "size": 196,
                      "last_modified": "2025-11-28T12:09:28.233778201",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  },
                  "GlobalExceptionHandler.java": {
                    "type": "file",
                    "info": {
                      "size": 3083,
                      "last_modified": "2025-11-28T12:09:28.23872354",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  },
                  "BusinessRuleException.java": {
                    "type": "file",
                    "info": {
                      "size": 188,
                      "last_modified": "2025-11-28T12:09:28.243415252",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  },
                  "ErrorResponse.java": {
                    "type": "file",
                    "info": {
                      "size": 848,
                      "last_modified": "2025-11-28T12:09:28.247956225",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  },
                  "ForbiddenException.java": {
                    "type": "file",
                    "info": {
                      "size": 182,
                      "last_modified": "2025-11-28T12:09:28.252558545",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  },
                  "ValidationException.java": {
                    "type": "file",
                    "info": {
                      "size": 184,
                      "last_modified": "2025-11-28T12:09:28.257241095",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  }
                },
                "dto": {
                  "response": {
                    "ClientDtoResponse.java": {
                      "type": "file",
                      "info": {
                        "size": 467,
                        "last_modified": "2025-11-28T12:09:28.262991068",
                        "mime_type": "text/x-java-source",
                        "extension": ".java"
                      }
                    },
                    "UserDtoResponse.java": {
                      "type": "file",
                      "info": {
                        "size": 289,
                        "last_modified": "2025-11-28T12:09:28.266580075",
                        "mime_type": "text/x-java-source",
                        "extension": ".java"
                      }
                    }
                  },
                  "request": {
                    "UserDtoRequest.java": {
                      "type": "file",
                      "info": {
                        "size": 707,
                        "last_modified": "2025-11-28T12:09:28.272057747",
                        "mime_type": "text/x-java-source",
                        "extension": ".java"
                      }
                    },
                    "ClientDtoRequest.java": {
                      "type": "file",
                      "info": {
                        "size": 772,
                        "last_modified": "2025-11-28T12:09:28.27566595",
                        "mime_type": "text/x-java-source",
                        "extension": ".java"
                      }
                    }
                  }
                },
                "repository": {
                  "ClientRepository.java": {
                    "type": "file",
                    "info": {
                      "size": 364,
                      "last_modified": "2025-11-28T12:09:28.284358451",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  },
                  "UserRepository.java": {
                    "type": "file",
                    "info": {
                      "size": 404,
                      "last_modified": "2025-11-28T12:09:28.28827314",
                      "mime_type": "text/x-java-source",
                      "extension": ".java"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "test": {
        "java": {
          "org": {
            "mustapha": {
              "smartShop": {
                "SmartShopApplicationTests.java": {
                  "type": "file",
                  "info": {
                    "size": 217,
                    "last_modified": "2025-11-28T12:09:28.303401708",
                    "mime_type": "text/x-java-source",
                    "extension": ".java"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "files": [
    {
      "path": ".env",
      "content": "POSTGRES_DB=smartshop_db\nPOSTGRES_USER=smartshop_user\nPOSTGRES_PASSWORD=smartshop_pass\nSPRING_DATASOURCE_URL=jdbc:postgresql://postgres:5432/smartshop_db\nSPRING_DATASOURCE_USERNAME=smartshop_user\nSPRING_DATASOURCE_PASSWORD=smartshop_pass\n",
      "info": {
        "size": 238,
        "last_modified": "2025-11-28T12:09:28.038069024",
        "mime_type": "text/plain",
        "extension": ".env"
      }
    },
    {
      "path": ".gitignore",
      "content": "HELP.md\ntarget/\n.mvn/wrapper/maven-wrapper.jar\n!**/src/main/**/target/\n!**/src/test/**/target/\n\n### STS ###\n.apt_generated\n.classpath\n.factorypath\n.project\n.settings\n.springBeans\n.sts4-cache\n\n### IntelliJ IDEA ###\n.idea\n*.iws\n*.iml\n*.ipr\n\n### NetBeans ###\n/nbproject/private/\n/nbbuild/\n/dist/\n/nbdist/\n/.nb-gradle/\nbuild/\n!**/src/main/**/build/\n!**/src/test/**/build/\n\n### VS Code ###\n.vscode/\n",
      "info": {
        "size": 394,
        "last_modified": "2025-11-28T12:09:28.065483749",
        "mime_type": "text/plain",
        "extension": ".gitignore"
      }
    },
    {
      "path": "mvnw",
      "content": "#!/bin/sh\n# ----------------------------------------------------------------------------\n# Licensed to the Apache Software Foundation (ASF) under one\n# or more contributor license agreements.  See the NOTICE file\n# distributed with this work for additional information\n# regarding copyright ownership.  The ASF licenses this file\n# to you under the Apache License, Version 2.0 (the\n# \"License\"); you may not use this file except in compliance\n# with the License.  You may obtain a copy of the License at\n#\n#    http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing,\n# software distributed under the License is distributed on an\n# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n# KIND, either express or implied.  See the License for the\n# specific language governing permissions and limitations\n# under the License.\n# ----------------------------------------------------------------------------\n\n# ----------------------------------------------------------------------------\n# Apache Maven Wrapper startup batch script, version 3.3.4\n#\n# Optional ENV vars\n# -----------------\n#   JAVA_HOME - location of a JDK home dir, required when download maven via java source\n#   MVNW_REPOURL - repo url base for downloading maven distribution\n#   MVNW_USERNAME/MVNW_PASSWORD - user and password for downloading maven\n#   MVNW_VERBOSE - true: enable verbose log; debug: trace the mvnw script; others: silence the output\n# ----------------------------------------------------------------------------\n\nset -euf\n[ \"${MVNW_VERBOSE-}\" != debug ] || set -x\n\n# OS specific support.\nnative_path() { printf %s\\\\n \"$1\"; }\ncase \"$(uname)\" in\nCYGWIN* | MINGW*)\n  [ -z \"${JAVA_HOME-}\" ] || JAVA_HOME=\"$(cygpath --unix \"$JAVA_HOME\")\"\n  native_path() { cygpath --path --windows \"$1\"; }\n  ;;\nesac\n\n# set JAVACMD and JAVACCMD\nset_java_home() {\n  # For Cygwin and MinGW, ensure paths are in Unix format before anything is touched\n  if [ -n \"${JAVA_HOME-}\" ]; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ]; then\n      # IBM's JDK on AIX uses strange locations for the executables\n      JAVACMD=\"$JAVA_HOME/jre/sh/java\"\n      JAVACCMD=\"$JAVA_HOME/jre/sh/javac\"\n    else\n      JAVACMD=\"$JAVA_HOME/bin/java\"\n      JAVACCMD=\"$JAVA_HOME/bin/javac\"\n\n      if [ ! -x \"$JAVACMD\" ] || [ ! -x \"$JAVACCMD\" ]; then\n        echo \"The JAVA_HOME environment variable is not defined correctly, so mvnw cannot run.\" >&2\n        echo \"JAVA_HOME is set to \\\"$JAVA_HOME\\\", but \\\"\\$JAVA_HOME/bin/java\\\" or \\\"\\$JAVA_HOME/bin/javac\\\" does not exist.\" >&2\n        return 1\n      fi\n    fi\n  else\n    JAVACMD=\"$(\n      'set' +e\n      'unset' -f command 2>/dev/null\n      'command' -v java\n    )\" || :\n    JAVACCMD=\"$(\n      'set' +e\n      'unset' -f command 2>/dev/null\n      'command' -v javac\n    )\" || :\n\n    if [ ! -x \"${JAVACMD-}\" ] || [ ! -x \"${JAVACCMD-}\" ]; then\n      echo \"The java/javac command does not exist in PATH nor is JAVA_HOME set, so mvnw cannot run.\" >&2\n      return 1\n    fi\n  fi\n}\n\n# hash string like Java String::hashCode\nhash_string() {\n  str=\"${1:-}\" h=0\n  while [ -n \"$str\" ]; do\n    char=\"${str%\"${str#?}\"}\"\n    h=$(((h * 31 + $(LC_CTYPE=C printf %d \"'$char\")) % 4294967296))\n    str=\"${str#?}\"\n  done\n  printf %x\\\\n $h\n}\n\nverbose() { :; }\n[ \"${MVNW_VERBOSE-}\" != true ] || verbose() { printf %s\\\\n \"${1-}\"; }\n\ndie() {\n  printf %s\\\\n \"$1\" >&2\n  exit 1\n}\n\ntrim() {\n  # MWRAPPER-139:\n  #   Trims trailing and leading whitespace, carriage returns, tabs, and linefeeds.\n  #   Needed for removing poorly interpreted newline sequences when running in more\n  #   exotic environments such as mingw bash on Windows.\n  printf \"%s\" \"${1}\" | tr -d '[:space:]'\n}\n\nscriptDir=\"$(dirname \"$0\")\"\nscriptName=\"$(basename \"$0\")\"\n\n# parse distributionUrl and optional distributionSha256Sum, requires .mvn/wrapper/maven-wrapper.properties\nwhile IFS=\"=\" read -r key value; do\n  case \"${key-}\" in\n  distributionUrl) distributionUrl=$(trim \"${value-}\") ;;\n  distributionSha256Sum) distributionSha256Sum=$(trim \"${value-}\") ;;\n  esac\ndone <\"$scriptDir/.mvn/wrapper/maven-wrapper.properties\"\n[ -n \"${distributionUrl-}\" ] || die \"cannot read distributionUrl property in $scriptDir/.mvn/wrapper/maven-wrapper.properties\"\n\ncase \"${distributionUrl##*/}\" in\nmaven-mvnd-*bin.*)\n  MVN_CMD=mvnd.sh _MVNW_REPO_PATTERN=/maven/mvnd/\n  case \"${PROCESSOR_ARCHITECTURE-}${PROCESSOR_ARCHITEW6432-}:$(uname -a)\" in\n  *AMD64:CYGWIN* | *AMD64:MINGW*) distributionPlatform=windows-amd64 ;;\n  :Darwin*x86_64) distributionPlatform=darwin-amd64 ;;\n  :Darwin*arm64) distributionPlatform=darwin-aarch64 ;;\n  :Linux*x86_64*) distributionPlatform=linux-amd64 ;;\n  *)\n    echo \"Cannot detect native platform for mvnd on $(uname)-$(uname -m), use pure java version\" >&2\n    distributionPlatform=linux-amd64\n    ;;\n  esac\n  distributionUrl=\"${distributionUrl%-bin.*}-$distributionPlatform.zip\"\n  ;;\nmaven-mvnd-*) MVN_CMD=mvnd.sh _MVNW_REPO_PATTERN=/maven/mvnd/ ;;\n*) MVN_CMD=\"mvn${scriptName#mvnw}\" _MVNW_REPO_PATTERN=/org/apache/maven/ ;;\nesac\n\n# apply MVNW_REPOURL and calculate MAVEN_HOME\n# maven home pattern: ~/.m2/wrapper/dists/{apache-maven-<version>,maven-mvnd-<version>-<platform>}/<hash>\n[ -z \"${MVNW_REPOURL-}\" ] || distributionUrl=\"$MVNW_REPOURL$_MVNW_REPO_PATTERN${distributionUrl#*\"$_MVNW_REPO_PATTERN\"}\"\ndistributionUrlName=\"${distributionUrl##*/}\"\ndistributionUrlNameMain=\"${distributionUrlName%.*}\"\ndistributionUrlNameMain=\"${distributionUrlNameMain%-bin}\"\nMAVEN_USER_HOME=\"${MAVEN_USER_HOME:-${HOME}/.m2}\"\nMAVEN_HOME=\"${MAVEN_USER_HOME}/wrapper/dists/${distributionUrlNameMain-}/$(hash_string \"$distributionUrl\")\"\n\nexec_maven() {\n  unset MVNW_VERBOSE MVNW_USERNAME MVNW_PASSWORD MVNW_REPOURL || :\n  exec \"$MAVEN_HOME/bin/$MVN_CMD\" \"$@\" || die \"cannot exec $MAVEN_HOME/bin/$MVN_CMD\"\n}\n\nif [ -d \"$MAVEN_HOME\" ]; then\n  verbose \"found existing MAVEN_HOME at $MAVEN_HOME\"\n  exec_maven \"$@\"\nfi\n\ncase \"${distributionUrl-}\" in\n*?-bin.zip | *?maven-mvnd-?*-?*.zip) ;;\n*) die \"distributionUrl is not valid, must match *-bin.zip or maven-mvnd-*.zip, but found '${distributionUrl-}'\" ;;\nesac\n\n# prepare tmp dir\nif TMP_DOWNLOAD_DIR=\"$(mktemp -d)\" && [ -d \"$TMP_DOWNLOAD_DIR\" ]; then\n  clean() { rm -rf -- \"$TMP_DOWNLOAD_DIR\"; }\n  trap clean HUP INT TERM EXIT\nelse\n  die \"cannot create temp dir\"\nfi\n\nmkdir -p -- \"${MAVEN_HOME%/*}\"\n\n# Download and Install Apache Maven\nverbose \"Couldn't find MAVEN_HOME, downloading and installing it ...\"\nverbose \"Downloading from: $distributionUrl\"\nverbose \"Downloading to: $TMP_DOWNLOAD_DIR/$distributionUrlName\"\n\n# select .zip or .tar.gz\nif ! command -v unzip >/dev/null; then\n  distributionUrl=\"${distributionUrl%.zip}.tar.gz\"\n  distributionUrlName=\"${distributionUrl##*/}\"\nfi\n\n# verbose opt\n__MVNW_QUIET_WGET=--quiet __MVNW_QUIET_CURL=--silent __MVNW_QUIET_UNZIP=-q __MVNW_QUIET_TAR=''\n[ \"${MVNW_VERBOSE-}\" != true ] || __MVNW_QUIET_WGET='' __MVNW_QUIET_CURL='' __MVNW_QUIET_UNZIP='' __MVNW_QUIET_TAR=v\n\n# normalize http auth\ncase \"${MVNW_PASSWORD:+has-password}\" in\n'') MVNW_USERNAME='' MVNW_PASSWORD='' ;;\nhas-password) [ -n \"${MVNW_USERNAME-}\" ] || MVNW_USERNAME='' MVNW_PASSWORD='' ;;\nesac\n\nif [ -z \"${MVNW_USERNAME-}\" ] && command -v wget >/dev/null; then\n  verbose \"Found wget ... using wget\"\n  wget ${__MVNW_QUIET_WGET:+\"$__MVNW_QUIET_WGET\"} \"$distributionUrl\" -O \"$TMP_DOWNLOAD_DIR/$distributionUrlName\" || die \"wget: Failed to fetch $distributionUrl\"\nelif [ -z \"${MVNW_USERNAME-}\" ] && command -v curl >/dev/null; then\n  verbose \"Found curl ... using curl\"\n  curl ${__MVNW_QUIET_CURL:+\"$__MVNW_QUIET_CURL\"} -f -L -o \"$TMP_DOWNLOAD_DIR/$distributionUrlName\" \"$distributionUrl\" || die \"curl: Failed to fetch $distributionUrl\"\nelif set_java_home; then\n  verbose \"Falling back to use Java to download\"\n  javaSource=\"$TMP_DOWNLOAD_DIR/Downloader.java\"\n  targetZip=\"$TMP_DOWNLOAD_DIR/$distributionUrlName\"\n  cat >\"$javaSource\" <<-END\n\tpublic class Downloader extends java.net.Authenticator\n\t{\n\t  protected java.net.PasswordAuthentication getPasswordAuthentication()\n\t  {\n\t    return new java.net.PasswordAuthentication( System.getenv( \"MVNW_USERNAME\" ), System.getenv( \"MVNW_PASSWORD\" ).toCharArray() );\n\t  }\n\t  public static void main( String[] args ) throws Exception\n\t  {\n\t    setDefault( new Downloader() );\n\t    java.nio.file.Files.copy( java.net.URI.create( args[0] ).toURL().openStream(), java.nio.file.Paths.get( args[1] ).toAbsolutePath().normalize() );\n\t  }\n\t}\n\tEND\n  # For Cygwin/MinGW, switch paths to Windows format before running javac and java\n  verbose \" - Compiling Downloader.java ...\"\n  \"$(native_path \"$JAVACCMD\")\" \"$(native_path \"$javaSource\")\" || die \"Failed to compile Downloader.java\"\n  verbose \" - Running Downloader.java ...\"\n  \"$(native_path \"$JAVACMD\")\" -cp \"$(native_path \"$TMP_DOWNLOAD_DIR\")\" Downloader \"$distributionUrl\" \"$(native_path \"$targetZip\")\"\nfi\n\n# If specified, validate the SHA-256 sum of the Maven distribution zip file\nif [ -n \"${distributionSha256Sum-}\" ]; then\n  distributionSha256Result=false\n  if [ \"$MVN_CMD\" = mvnd.sh ]; then\n    echo \"Checksum validation is not supported for maven-mvnd.\" >&2\n    echo \"Please disable validation by removing 'distributionSha256Sum' from your maven-wrapper.properties.\" >&2\n    exit 1\n  elif command -v sha256sum >/dev/null; then\n    if echo \"$distributionSha256Sum  $TMP_DOWNLOAD_DIR/$distributionUrlName\" | sha256sum -c - >/dev/null 2>&1; then\n      distributionSha256Result=true\n    fi\n  elif command -v shasum >/dev/null; then\n    if echo \"$distributionSha256Sum  $TMP_DOWNLOAD_DIR/$distributionUrlName\" | shasum -a 256 -c >/dev/null 2>&1; then\n      distributionSha256Result=true\n    fi\n  else\n    echo \"Checksum validation was requested but neither 'sha256sum' or 'shasum' are available.\" >&2\n    echo \"Please install either command, or disable validation by removing 'distributionSha256Sum' from your maven-wrapper.properties.\" >&2\n    exit 1\n  fi\n  if [ $distributionSha256Result = false ]; then\n    echo \"Error: Failed to validate Maven distribution SHA-256, your Maven distribution might be compromised.\" >&2\n    echo \"If you updated your Maven version, you need to update the specified distributionSha256Sum property.\" >&2\n    exit 1\n  fi\nfi\n\n# unzip and move\nif command -v unzip >/dev/null; then\n  unzip ${__MVNW_QUIET_UNZIP:+\"$__MVNW_QUIET_UNZIP\"} \"$TMP_DOWNLOAD_DIR/$distributionUrlName\" -d \"$TMP_DOWNLOAD_DIR\" || die \"failed to unzip\"\nelse\n  tar xzf${__MVNW_QUIET_TAR:+\"$__MVNW_QUIET_TAR\"} \"$TMP_DOWNLOAD_DIR/$distributionUrlName\" -C \"$TMP_DOWNLOAD_DIR\" || die \"failed to untar\"\nfi\n\n# Find the actual extracted directory name (handles snapshots where filename != directory name)\nactualDistributionDir=\"\"\n\n# First try the expected directory name (for regular distributions)\nif [ -d \"$TMP_DOWNLOAD_DIR/$distributionUrlNameMain\" ]; then\n  if [ -f \"$TMP_DOWNLOAD_DIR/$distributionUrlNameMain/bin/$MVN_CMD\" ]; then\n    actualDistributionDir=\"$distributionUrlNameMain\"\n  fi\nfi\n\n# If not found, search for any directory with the Maven executable (for snapshots)\nif [ -z \"$actualDistributionDir\" ]; then\n  # enable globbing to iterate over items\n  set +f\n  for dir in \"$TMP_DOWNLOAD_DIR\"/*; do\n    if [ -d \"$dir\" ]; then\n      if [ -f \"$dir/bin/$MVN_CMD\" ]; then\n        actualDistributionDir=\"$(basename \"$dir\")\"\n        break\n      fi\n    fi\n  done\n  set -f\nfi\n\nif [ -z \"$actualDistributionDir\" ]; then\n  verbose \"Contents of $TMP_DOWNLOAD_DIR:\"\n  verbose \"$(ls -la \"$TMP_DOWNLOAD_DIR\")\"\n  die \"Could not find Maven distribution directory in extracted archive\"\nfi\n\nverbose \"Found extracted Maven distribution directory: $actualDistributionDir\"\nprintf %s\\\\n \"$distributionUrl\" >\"$TMP_DOWNLOAD_DIR/$actualDistributionDir/mvnw.url\"\nmv -- \"$TMP_DOWNLOAD_DIR/$actualDistributionDir\" \"$MAVEN_HOME\" || [ -d \"$MAVEN_HOME\" ] || die \"fail to move MAVEN_HOME\"\n\nclean || :\nexec_maven \"$@\"\n",
      "info": {
        "size": 11790,
        "last_modified": "2025-11-28T12:09:28.070700511",
        "mime_type": "application/x-sh",
        "extension": "."
      }
    },
    {
      "path": ".mvn/wrapper/maven-wrapper.properties",
      "content": "wrapperVersion=3.3.4\ndistributionType=only-script\ndistributionUrl=https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.9.11/apache-maven-3.9.11-bin.zip\n",
      "info": {
        "size": 168,
        "last_modified": "2025-11-28T12:09:28.075450686",
        "mime_type": "text/x-java-properties",
        "extension": ".properties"
      }
    },
    {
      "path": "docker-compose.yml",
      "content": "version: '3.8'\n\nservices:\n  # ----------------------------\n  # PostgreSQL Database\n  # ----------------------------\n  postgres:\n    image: postgres:16-alpine  # Lightweight and fast Alpine version\n    container_name: smartshop-postgres\n    restart: unless-stopped\n    environment:\n      POSTGRES_DB: ${POSTGRES_DB}     # Database name from .env\n      POSTGRES_USER: ${POSTGRES_USER}   # Database username\n      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}  # Database password\n      POSTGRES_INITDB_ARGS: \"--encoding=UTF8\" # UTF8 encoding\n    ports:\n      - \"5432:5432\"  # Expose port to host\n    volumes:\n      - postgres_data:/var/lib/postgresql/data  # Persist database data\n    networks:\n      - smartshop-network  # Connect to custom network\n    healthcheck:  # Check if DB is ready\n      test: [\"CMD-SHELL\", \"pg_isready -U ${POSTGRES_USER} -d ${POSTGRES_DB}\"] # from env\n      interval: 10s\n      timeout: 5s\n      retries: 5\n      start_period: 10s\n\n  # ----------------------------\n  # Spring Boot Application\n  # ----------------------------\n  app:\n    build:\n      context: .\n      dockerfile: Dockerfile  # Use Dockerfile to build the app image\n    container_name: smartshop-app\n    restart: unless-stopped\n    ports:\n      - \"8080:8080\"  # Expose port for the app\n    environment:\n      SPRING_PROFILES_ACTIVE: docker  # Activate Docker profile\n      SPRING_DATASOURCE_URL: ${SPRING_DATASOURCE_URL}\n      SPRING_DATASOURCE_USERNAME: ${SPRING_DATASOURCE_USERNAME}\n      SPRING_DATASOURCE_PASSWORD:  ${SPRING_DATASOURCE_PASSWORD}\n      SPRING_JPA_HIBERNATE_DDL_AUTO: update\n      SPRING_LIQUIBASE_ENABLED: true\n    depends_on:\n      postgres:\n        condition: service_healthy  # Wait until DB is healthy\n    networks:\n      - smartshop-network\n    healthcheck:  # Check if the app is running\n      test: [\"CMD\", \"wget\", \"--no-verbose\", \"--tries=1\", \"--spider\", \"http://localhost:8080/actuator/health\"]\n      interval: 30s\n      timeout: 5s\n      retries: 3\n      start_period: 150s\n\n  # ----------------------------\n  # PgAdmin (GUI for PostgreSQL)\n  # ----------------------------\n  pgadmin:\n    image: dpage/pgadmin4:latest\n    container_name: smartshop-pgadmin\n    restart: unless-stopped\n    environment:\n      PGADMIN_DEFAULT_EMAIL: admin@smartshop.com\n      PGADMIN_DEFAULT_PASSWORD: admin\n      PGADMIN_CONFIG_SERVER_MODE: 'False'\n    ports:\n      - \"5050:80\"  # Access PgAdmin in browser\n    volumes:\n      - pgadmin_data:/var/lib/pgadmin  # Persist PgAdmin data\n    depends_on:\n      - postgres\n    networks:\n      - smartshop-network\n\n# ----------------------------\n# Volumes for persistent storage\n# ----------------------------\nvolumes:\n  postgres_data:\n    driver: local\n  pgadmin_data:\n    driver: local\n  jenkins_home:\n    driver: local\n\n# ----------------------------\n# Custom network for service communication\n# ----------------------------\nnetworks:\n  smartshop-network:\n    driver: bridge\n",
      "info": {
        "size": 2915,
        "last_modified": "2025-11-28T12:09:28.085139728",
        "mime_type": "text/x-yaml",
        "extension": ".yml"
      }
    },
    {
      "path": "mvnw.cmd",
      "content": "<# : batch portion\n@REM ----------------------------------------------------------------------------\n@REM Licensed to the Apache Software Foundation (ASF) under one\n@REM or more contributor license agreements.  See the NOTICE file\n@REM distributed with this work for additional information\n@REM regarding copyright ownership.  The ASF licenses this file\n@REM to you under the Apache License, Version 2.0 (the\n@REM \"License\"); you may not use this file except in compliance\n@REM with the License.  You may obtain a copy of the License at\n@REM\n@REM    http://www.apache.org/licenses/LICENSE-2.0\n@REM\n@REM Unless required by applicable law or agreed to in writing,\n@REM software distributed under the License is distributed on an\n@REM \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n@REM KIND, either express or implied.  See the License for the\n@REM specific language governing permissions and limitations\n@REM under the License.\n@REM ----------------------------------------------------------------------------\n\n@REM ----------------------------------------------------------------------------\n@REM Apache Maven Wrapper startup batch script, version 3.3.4\n@REM\n@REM Optional ENV vars\n@REM   MVNW_REPOURL - repo url base for downloading maven distribution\n@REM   MVNW_USERNAME/MVNW_PASSWORD - user and password for downloading maven\n@REM   MVNW_VERBOSE - true: enable verbose log; others: silence the output\n@REM ----------------------------------------------------------------------------\n\n@IF \"%__MVNW_ARG0_NAME__%\"==\"\" (SET __MVNW_ARG0_NAME__=%~nx0)\n@SET __MVNW_CMD__=\n@SET __MVNW_ERROR__=\n@SET __MVNW_PSMODULEP_SAVE=%PSModulePath%\n@SET PSModulePath=\n@FOR /F \"usebackq tokens=1* delims==\" %%A IN (`powershell -noprofile \"& {$scriptDir='%~dp0'; $script='%__MVNW_ARG0_NAME__%'; icm -ScriptBlock ([Scriptblock]::Create((Get-Content -Raw '%~f0'))) -NoNewScope}\"`) DO @(\n  IF \"%%A\"==\"MVN_CMD\" (set __MVNW_CMD__=%%B) ELSE IF \"%%B\"==\"\" (echo %%A) ELSE (echo %%A=%%B)\n)\n@SET PSModulePath=%__MVNW_PSMODULEP_SAVE%\n@SET __MVNW_PSMODULEP_SAVE=\n@SET __MVNW_ARG0_NAME__=\n@SET MVNW_USERNAME=\n@SET MVNW_PASSWORD=\n@IF NOT \"%__MVNW_CMD__%\"==\"\" (\"%__MVNW_CMD__%\" %*)\n@echo Cannot start maven from wrapper >&2 && exit /b 1\n@GOTO :EOF\n: end batch / begin powershell #>\n\n$ErrorActionPreference = \"Stop\"\nif ($env:MVNW_VERBOSE -eq \"true\") {\n  $VerbosePreference = \"Continue\"\n}\n\n# calculate distributionUrl, requires .mvn/wrapper/maven-wrapper.properties\n$distributionUrl = (Get-Content -Raw \"$scriptDir/.mvn/wrapper/maven-wrapper.properties\" | ConvertFrom-StringData).distributionUrl\nif (!$distributionUrl) {\n  Write-Error \"cannot read distributionUrl property in $scriptDir/.mvn/wrapper/maven-wrapper.properties\"\n}\n\nswitch -wildcard -casesensitive ( $($distributionUrl -replace '^.*/','') ) {\n  \"maven-mvnd-*\" {\n    $USE_MVND = $true\n    $distributionUrl = $distributionUrl -replace '-bin\\.[^.]*$',\"-windows-amd64.zip\"\n    $MVN_CMD = \"mvnd.cmd\"\n    break\n  }\n  default {\n    $USE_MVND = $false\n    $MVN_CMD = $script -replace '^mvnw','mvn'\n    break\n  }\n}\n\n# apply MVNW_REPOURL and calculate MAVEN_HOME\n# maven home pattern: ~/.m2/wrapper/dists/{apache-maven-<version>,maven-mvnd-<version>-<platform>}/<hash>\nif ($env:MVNW_REPOURL) {\n  $MVNW_REPO_PATTERN = if ($USE_MVND -eq $False) { \"/org/apache/maven/\" } else { \"/maven/mvnd/\" }\n  $distributionUrl = \"$env:MVNW_REPOURL$MVNW_REPO_PATTERN$($distributionUrl -replace \"^.*$MVNW_REPO_PATTERN\",'')\"\n}\n$distributionUrlName = $distributionUrl -replace '^.*/',''\n$distributionUrlNameMain = $distributionUrlName -replace '\\.[^.]*$','' -replace '-bin$',''\n\n$MAVEN_M2_PATH = \"$HOME/.m2\"\nif ($env:MAVEN_USER_HOME) {\n  $MAVEN_M2_PATH = \"$env:MAVEN_USER_HOME\"\n}\n\nif (-not (Test-Path -Path $MAVEN_M2_PATH)) {\n    New-Item -Path $MAVEN_M2_PATH -ItemType Directory | Out-Null\n}\n\n$MAVEN_WRAPPER_DISTS = $null\nif ((Get-Item $MAVEN_M2_PATH).Target[0] -eq $null) {\n  $MAVEN_WRAPPER_DISTS = \"$MAVEN_M2_PATH/wrapper/dists\"\n} else {\n  $MAVEN_WRAPPER_DISTS = (Get-Item $MAVEN_M2_PATH).Target[0] + \"/wrapper/dists\"\n}\n\n$MAVEN_HOME_PARENT = \"$MAVEN_WRAPPER_DISTS/$distributionUrlNameMain\"\n$MAVEN_HOME_NAME = ([System.Security.Cryptography.SHA256]::Create().ComputeHash([byte[]][char[]]$distributionUrl) | ForEach-Object {$_.ToString(\"x2\")}) -join ''\n$MAVEN_HOME = \"$MAVEN_HOME_PARENT/$MAVEN_HOME_NAME\"\n\nif (Test-Path -Path \"$MAVEN_HOME\" -PathType Container) {\n  Write-Verbose \"found existing MAVEN_HOME at $MAVEN_HOME\"\n  Write-Output \"MVN_CMD=$MAVEN_HOME/bin/$MVN_CMD\"\n  exit $?\n}\n\nif (! $distributionUrlNameMain -or ($distributionUrlName -eq $distributionUrlNameMain)) {\n  Write-Error \"distributionUrl is not valid, must end with *-bin.zip, but found $distributionUrl\"\n}\n\n# prepare tmp dir\n$TMP_DOWNLOAD_DIR_HOLDER = New-TemporaryFile\n$TMP_DOWNLOAD_DIR = New-Item -Itemtype Directory -Path \"$TMP_DOWNLOAD_DIR_HOLDER.dir\"\n$TMP_DOWNLOAD_DIR_HOLDER.Delete() | Out-Null\ntrap {\n  if ($TMP_DOWNLOAD_DIR.Exists) {\n    try { Remove-Item $TMP_DOWNLOAD_DIR -Recurse -Force | Out-Null }\n    catch { Write-Warning \"Cannot remove $TMP_DOWNLOAD_DIR\" }\n  }\n}\n\nNew-Item -Itemtype Directory -Path \"$MAVEN_HOME_PARENT\" -Force | Out-Null\n\n# Download and Install Apache Maven\nWrite-Verbose \"Couldn't find MAVEN_HOME, downloading and installing it ...\"\nWrite-Verbose \"Downloading from: $distributionUrl\"\nWrite-Verbose \"Downloading to: $TMP_DOWNLOAD_DIR/$distributionUrlName\"\n\n$webclient = New-Object System.Net.WebClient\nif ($env:MVNW_USERNAME -and $env:MVNW_PASSWORD) {\n  $webclient.Credentials = New-Object System.Net.NetworkCredential($env:MVNW_USERNAME, $env:MVNW_PASSWORD)\n}\n[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12\n$webclient.DownloadFile($distributionUrl, \"$TMP_DOWNLOAD_DIR/$distributionUrlName\") | Out-Null\n\n# If specified, validate the SHA-256 sum of the Maven distribution zip file\n$distributionSha256Sum = (Get-Content -Raw \"$scriptDir/.mvn/wrapper/maven-wrapper.properties\" | ConvertFrom-StringData).distributionSha256Sum\nif ($distributionSha256Sum) {\n  if ($USE_MVND) {\n    Write-Error \"Checksum validation is not supported for maven-mvnd. `nPlease disable validation by removing 'distributionSha256Sum' from your maven-wrapper.properties.\"\n  }\n  Import-Module $PSHOME\\Modules\\Microsoft.PowerShell.Utility -Function Get-FileHash\n  if ((Get-FileHash \"$TMP_DOWNLOAD_DIR/$distributionUrlName\" -Algorithm SHA256).Hash.ToLower() -ne $distributionSha256Sum) {\n    Write-Error \"Error: Failed to validate Maven distribution SHA-256, your Maven distribution might be compromised. If you updated your Maven version, you need to update the specified distributionSha256Sum property.\"\n  }\n}\n\n# unzip and move\nExpand-Archive \"$TMP_DOWNLOAD_DIR/$distributionUrlName\" -DestinationPath \"$TMP_DOWNLOAD_DIR\" | Out-Null\n\n# Find the actual extracted directory name (handles snapshots where filename != directory name)\n$actualDistributionDir = \"\"\n\n# First try the expected directory name (for regular distributions)\n$expectedPath = Join-Path \"$TMP_DOWNLOAD_DIR\" \"$distributionUrlNameMain\"\n$expectedMvnPath = Join-Path \"$expectedPath\" \"bin/$MVN_CMD\"\nif ((Test-Path -Path $expectedPath -PathType Container) -and (Test-Path -Path $expectedMvnPath -PathType Leaf)) {\n  $actualDistributionDir = $distributionUrlNameMain\n}\n\n# If not found, search for any directory with the Maven executable (for snapshots)\nif (!$actualDistributionDir) {\n  Get-ChildItem -Path \"$TMP_DOWNLOAD_DIR\" -Directory | ForEach-Object {\n    $testPath = Join-Path $_.FullName \"bin/$MVN_CMD\"\n    if (Test-Path -Path $testPath -PathType Leaf) {\n      $actualDistributionDir = $_.Name\n    }\n  }\n}\n\nif (!$actualDistributionDir) {\n  Write-Error \"Could not find Maven distribution directory in extracted archive\"\n}\n\nWrite-Verbose \"Found extracted Maven distribution directory: $actualDistributionDir\"\nRename-Item -Path \"$TMP_DOWNLOAD_DIR/$actualDistributionDir\" -NewName $MAVEN_HOME_NAME | Out-Null\ntry {\n  Move-Item -Path \"$TMP_DOWNLOAD_DIR/$MAVEN_HOME_NAME\" -Destination $MAVEN_HOME_PARENT | Out-Null\n} catch {\n  if (! (Test-Path -Path \"$MAVEN_HOME\" -PathType Container)) {\n    Write-Error \"fail to move MAVEN_HOME\"\n  }\n} finally {\n  try { Remove-Item $TMP_DOWNLOAD_DIR -Recurse -Force | Out-Null }\n  catch { Write-Warning \"Cannot remove $TMP_DOWNLOAD_DIR\" }\n}\n\nWrite-Output \"MVN_CMD=$MAVEN_HOME/bin/$MVN_CMD\"\n",
      "info": {
        "size": 8292,
        "last_modified": "2025-11-28T12:09:28.090160342",
        "mime_type": "application/x-bat",
        "extension": ".cmd"
      }
    },
    {
      "path": "pom.xml",
      "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0\n         https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n\n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>3.2.0</version>\n        <relativePath/>\n    </parent>\n\n    <groupId>org.mustapha</groupId>\n    <artifactId>smartShop</artifactId>\n    <version>0.0.1-SNAPSHOT</version>\n    <name>smartShop</name>\n    <description>SmartShop - Gestion commerciale B2B MicroTech Maroc</description>\n\n    <properties>\n        <java.version>17</java.version>\n        <mapstruct.version>1.5.5.Final</mapstruct.version>\n    </properties>\n\n    <dependencies>\n        <!-- Spring Boot Starters -->\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-data-jpa</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-validation</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n\n        <!-- Database Driver - Choisir UN des deux -->\n        <dependency>\n            <groupId>org.postgresql</groupId>\n            <artifactId>postgresql</artifactId>\n            <scope>runtime</scope>\n        </dependency>\n\n        <!-- MapStruct -->\n        <dependency>\n            <groupId>org.mapstruct</groupId>\n            <artifactId>mapstruct</artifactId>\n            <version>${mapstruct.version}</version>\n        </dependency>\n\n        <!-- Lombok -->\n        <dependency>\n            <groupId>org.projectlombok</groupId>\n            <artifactId>lombok</artifactId>\n            <optional>true</optional>\n        </dependency>\n\n        <!-- DevTools -->\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-devtools</artifactId>\n            <scope>runtime</scope>\n            <optional>true</optional>\n        </dependency>\n\n        <!-- Swagger/OpenAPI Documentation -->\n        <dependency>\n            <groupId>org.springdoc</groupId>\n            <artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>\n            <version>2.3.0</version>\n        </dependency>\n\n        <!-- Test Dependencies -->\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-test</artifactId>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>com.h2database</groupId>\n            <artifactId>h2</artifactId>\n            <scope>test</scope>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-compiler-plugin</artifactId>\n                <configuration>\n                    <source>17</source>\n                    <target>17</target>\n                    <annotationProcessorPaths>\n                        <path>\n                            <groupId>org.projectlombok</groupId>\n                            <artifactId>lombok</artifactId>\n                            <version>${lombok.version}</version>\n                        </path>\n                        <path>\n                            <groupId>org.mapstruct</groupId>\n                            <artifactId>mapstruct-processor</artifactId>\n                            <version>${mapstruct.version}</version>\n                        </path>\n                        <path>\n                            <groupId>org.projectlombok</groupId>\n                            <artifactId>lombok-mapstruct-binding</artifactId>\n                            <version>0.2.0</version>\n                        </path>\n                    </annotationProcessorPaths>\n                </configuration>\n            </plugin>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n                <configuration>\n                    <excludes>\n                        <exclude>\n                            <groupId>org.projectlombok</groupId>\n                            <artifactId>lombok</artifactId>\n                        </exclude>\n                    </excludes>\n                </configuration>\n            </plugin>\n        </plugins>\n    </build>\n</project>",
      "info": {
        "size": 4719,
        "last_modified": "2025-11-28T12:09:28.095484423",
        "mime_type": "application/xml",
        "extension": ".xml"
      }
    },
    {
      "path": "Dockerfile",
      "content": "# Stage 1: Build\nFROM maven:3.9-eclipse-temurin-17-alpine AS build\nWORKDIR /app\nCOPY pom.xml .\nRUN mvn dependency:go-offline -B\nCOPY src ./src\nRUN mvn clean package -DskipTests\n\n# Stage 2: Run\nFROM eclipse-temurin:17-jre-alpine\nWORKDIR /app\nCOPY --from=build /app/target/*.jar app.jar\nEXPOSE 8080\nENTRYPOINT [\"java\", \"-jar\", \"app.jar\"]\n",
      "info": {
        "size": 336,
        "last_modified": "2025-11-28T12:09:28.116465202",
        "mime_type": "text/plain",
        "extension": "."
      }
    },
    {
      "path": ".gitattributes",
      "content": "/mvnw text eol=lf\n*.cmd text eol=crlf\n",
      "info": {
        "size": 38,
        "last_modified": "2025-11-28T12:09:28.12350034",
        "mime_type": "text/plain",
        "extension": ".gitattributes"
      }
    },
    {
      "path": "HELP.md",
      "content": "# Getting Started\n\n### Reference Documentation\nFor further reference, please consider the following sections:\n\n* [Official Apache Maven documentation](https://maven.apache.org/guides/index.html)\n* [Spring Boot Maven Plugin Reference Guide](https://docs.spring.io/spring-boot/4.0.0/maven-plugin)\n* [Create an OCI image](https://docs.spring.io/spring-boot/4.0.0/maven-plugin/build-image.html)\n* [Spring Web](https://docs.spring.io/spring-boot/4.0.0/reference/web/servlet.html)\n* [Spring Boot DevTools](https://docs.spring.io/spring-boot/4.0.0/reference/using/devtools.html)\n* [Spring Data JPA](https://docs.spring.io/spring-boot/4.0.0/reference/data/sql.html#data.sql.jpa-and-spring-data)\n* [Validation](https://docs.spring.io/spring-boot/4.0.0/reference/io/validation.html)\n\n### Guides\nThe following guides illustrate how to use some features concretely:\n\n* [Building a RESTful Web Service](https://spring.io/guides/gs/rest-service/)\n* [Serving Web Content with Spring MVC](https://spring.io/guides/gs/serving-web-content/)\n* [Building REST services with Spring](https://spring.io/guides/tutorials/rest/)\n* [Accessing Data with JPA](https://spring.io/guides/gs/accessing-data-jpa/)\n* [Validation](https://spring.io/guides/gs/validating-form-input/)\n\n### Maven Parent overrides\n\nDue to Maven's design, elements are inherited from the parent POM to the project POM.\nWhile most of the inheritance is fine, it also inherits unwanted elements like `<license>` and `<developers>` from the parent.\nTo prevent this, the project POM contains empty overrides for these elements.\nIf you manually switch to a different parent and actually want the inheritance, you need to remove those overrides.\n",
      "info": {
        "size": 1684,
        "last_modified": "2025-11-28T12:09:28.128773369",
        "mime_type": "text/x-web-markdown",
        "extension": ".md"
      }
    },
    {
      "path": "src/main/resources/application.yaml",
      "content": "# Database configuration postgres\nspring:\n  datasource:\n    url: ${SPRING_DATASOURCE_URL}\n    username: ${SPRING_DATASOURCE_USERNAME}\n    password: ${SPRING_DATASOURCE_PASSWORD}\n    driver-class-name: org.postgresql.Driver\n\n\n  # JPA/Hibernate\n  jpa:\n    hibernate:\n      ddl-auto: update\n    show-sql: true\n    properties:\n      hibernate:\n        format_sql: true\n        dialect: org.hibernate.dialect.PostgreSQLDialect\n\n# Server Configuration\nserver:\n  port: 8080\n  servlet:\n    context-path: /api #the api path after domain\n    # Session Configuration\n    session:\n      timeout: 30m\n      cookie:\n        http-only: true\n\n# Logging\nlogging:\n  level:\n    org.hibernate.SQL: DEBUG\n    org.hibernate.type.descriptor.sql.BasicBinder: TRACE\n\n\n",
      "info": {
        "size": 743,
        "last_modified": "2025-11-28T12:09:28.134429495",
        "mime_type": "text/x-yaml",
        "extension": ".yaml"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/service/impl/UserServiceImpl.java",
      "content": "package org.mustapha.smartShop.service.impl;\n\nimport jakarta.transaction.Transactional;\nimport lombok.RequiredArgsConstructor;\nimport org.mustapha.smartShop.dto.request.UserDtoRequest;\nimport org.mustapha.smartShop.dto.response.UserDtoResponse;\nimport org.mustapha.smartShop.exception.ResourceNotFoundException;\nimport org.mustapha.smartShop.exception.ValidationException;\nimport org.mustapha.smartShop.mapper.ClientMapper;\nimport org.mustapha.smartShop.mapper.UserMapper;\nimport org.mustapha.smartShop.model.Client;\nimport org.mustapha.smartShop.model.User;\nimport org.mustapha.smartShop.repository.ClientRepository;\nimport org.mustapha.smartShop.repository.UserRepository;\nimport org.mustapha.smartShop.service.UserService;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\nimport java.util.stream.Collectors;\n\n@Service\n@Transactional\n@RequiredArgsConstructor // Use Lombok for constructor injection\npublic class UserServiceImpl implements UserService {\n\n    private final UserRepository userRepository;\n    private final ClientRepository clientRepository;\n\n    private final UserMapper userMapper;\n    private final ClientMapper clientMapper;\n\n    @Override\n    public UserDtoResponse createUser(UserDtoRequest dto) {\n        // Check if username already exists\n        if (userRepository.findByUsername(dto.getUsername()).isPresent()) {\n            throw new ValidationException(\"Username already exists: \" + dto.getUsername());\n        }\n        if (dto.getClient() != null && clientRepository.findByEmail(dto.getClient().getEmail()).isPresent()) {\n            throw new ValidationException(\"Email already exist\");\n        }\n        // Convert DTO to Entity\n        User user = userMapper.toEntity(dto);\n\n        // Handle client if exists in DTO\n        if (dto.getClient() != null) {\n            Client client = clientMapper.toEntity(dto.getClient());\n            client.setUser(user);\n            user.setClient(client);\n        }\n\n        // Save user to database\n        User savedUser = userRepository.save(user);\n\n        // Convert Entity to Response DTO\n        return userMapper.toDto(savedUser);\n    }\n\n    @Override\n    public UserDtoResponse updateUser(Long id, UserDtoRequest userDtoRequest) {\n        // Find existing user by id\n        User user = userRepository.findById(id)\n                .orElseThrow(() -> new ResourceNotFoundException(\"User not found with id: \" + id));\n\n        // Update basic user data\n        user.setUsername(userDtoRequest.getUsername());\n        user.setPassword(userDtoRequest.getPassword());\n        user.setRole(userDtoRequest.getRole());\n\n        // Update client data if exists in DTO\n        if (userDtoRequest.getClient() != null) {\n            if (user.getClient() != null) {\n                // Update existing client entity\n                clientMapper.updateClientFromDto(userDtoRequest.getClient(), user.getClient());\n            } else {\n                // Create new client entity\n                Client client = clientMapper.toEntity(userDtoRequest.getClient());\n                client.setUser(user);\n                user.setClient(client);\n            }\n        }\n\n        // Save updates to database\n        User updatedUser = userRepository.save(user);\n\n        // Convert updated entity to Response DTO\n        return userMapper.toDto(updatedUser);\n    }\n\n    @Override\n    public UserDtoResponse getUerById(Long id) {\n        // Find user by id or throw exception\n        User user = userRepository.findById(id)\n                .orElseThrow(() -> new ResourceNotFoundException(\"User not found with id: \" + id));\n\n        // Convert entity to Response DTO\n        return userMapper.toDto(user);\n    }\n\n\n    @Override\n    public List<UserDtoResponse> getAllUsers() {\n        return userRepository.findAll()\n                .stream()\n                .map(user -> userMapper.toDto(user))\n                .collect(Collectors.toList());\n    }\n\n    @Override\n    public void deleteUser(Long id) {\n      // find user in db\n        User user = userRepository.findById(id).orElseThrow(()-> new ResourceNotFoundException(\"user not found with id: \"+id));\n        userRepository.delete(user);\n    }\n}",
      "info": {
        "size": 4177,
        "last_modified": "2025-11-28T12:09:28.147709749",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/service/UserService.java",
      "content": "package org.mustapha.smartShop.service;\n\nimport jakarta.transaction.Transactional;\nimport org.mustapha.smartShop.dto.request.UserDtoRequest;\nimport org.mustapha.smartShop.dto.response.UserDtoResponse;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\nimport java.util.Optional;\n\n/*8\n All methods may throw exceptions handled by GlobalExceptionHandler\n */\npublic interface UserService {\n\n    UserDtoResponse createUser(UserDtoRequest dto);\n    UserDtoResponse updateUser(Long id, UserDtoRequest userDtoRequest);\n    UserDtoResponse getUerById(Long id);\n    List<UserDtoResponse> getAllUsers();\n    void deleteUser(Long id);\n}\n\n",
      "info": {
        "size": 647,
        "last_modified": "2025-11-28T12:09:28.155034069",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/model/Client.java",
      "content": "package org.mustapha.smartShop.model;\n\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.Email;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport org.mustapha.smartShop.model.Order;\nimport org.mustapha.smartShop.enums.LoyaltyLevel;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Entity\n@Table(name = \"clients\")\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class Client {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false)\n    private String name;\n\n    @Email\n    private String email;\n\n    @Enumerated(EnumType.STRING)\n    private LoyaltyLevel loyaltyLevel = LoyaltyLevel.BRONZE; // default\n\n    @OneToMany(mappedBy = \"client\", cascade = CascadeType.ALL, orphanRemoval = true)\n    private List<Order> orderList = new ArrayList<>();\n\n    @OneToOne\n    @JoinColumn(name = \"user_id\", nullable = false, unique = true)\n    private User user;\n}\n",
      "info": {
        "size": 981,
        "last_modified": "2025-11-28T12:09:28.163949395",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/model/Order.java",
      "content": "package org.mustapha.smartShop.model;\n\nimport jakarta.persistence.*;\nimport lombok.Data;\nimport org.mustapha.smartShop.enums.OrderStatus;\n\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Entity\n@Table(name = \"orders\")\n@Data\npublic class Order {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ManyToOne\n    @JoinColumn(name = \"client_id\")\n    private Client client;\n\n    // many prodcuts has many orders and many order for same order\n    @ManyToMany\n    @JoinTable(\n            name = \"order_item\",\n            joinColumns = @JoinColumn(name = \"order_id\"),\n            inverseJoinColumns = @JoinColumn(name = \"product_id\")\n    )\n    private List<Product>products = new ArrayList<>();\n\n    private LocalDateTime date;\n\n    private double subTotal;\n\n    private double discount;\n\n    private double vat;\n\n    private double total;\n\n    @OneToOne\n    @JoinColumn(name = \"promo_code_id\")\n    private PromoCode promoCode;\n\n    private OrderStatus status = OrderStatus.PENDING;\n\n    private double RemainingAmount;\n\n\n}\n",
      "info": {
        "size": 1093,
        "last_modified": "2025-11-28T12:09:28.168214869",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/model/Product.java",
      "content": "package org.mustapha.smartShop.model;\n\nimport jakarta.persistence.*;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Entity\n@Table(name = \"products\")\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class Product {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String name;\n\n    private double unitPrice;\n\n    private int stock;\n}\n",
      "info": {
        "size": 428,
        "last_modified": "2025-11-28T12:09:28.17243703",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/model/User.java",
      "content": "package org.mustapha.smartShop.model;\n\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.NotBlank;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport org.mustapha.smartShop.enums.UserRole;\nimport org.mustapha.smartShop.model.Client;\n@Entity\n@Table(name = \"users\")\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder\npublic class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(unique = true, nullable = false)\n    private String username;\n\n    @Column(nullable = false)\n    private String password;\n\n    @Enumerated(EnumType.STRING)\n    @Column(nullable = false,length = 20)\n    private UserRole role;\n\n    @OneToOne(mappedBy = \"user\", cascade = CascadeType.ALL, orphanRemoval = true)\n    private Client client;\n}\n",
      "info": {
        "size": 858,
        "last_modified": "2025-11-28T12:09:28.177173748",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/model/PromoCode.java",
      "content": "package org.mustapha.smartShop.model;\n\nimport jakarta.persistence.*;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Entity\n@Table(name = \"promocodes\")\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n\npublic class PromoCode {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String code;\n\n    private double percentage;\n\n    private boolean isActive;\n\n\n    @ManyToOne\n    @JoinColumn(name = \"order_id\")\n    private Order order;\n}\n",
      "info": {
        "size": 518,
        "last_modified": "2025-11-28T12:09:28.181717079",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/SmartShopApplication.java",
      "content": "package org.mustapha.smartShop;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class SmartShopApplication {\n\n\tpublic static void main(String[] args) {\n\t\tSpringApplication.run(SmartShopApplication.class, args);\n\t}\n\n\n}\n",
      "info": {
        "size": 322,
        "last_modified": "2025-11-28T12:09:28.18766597",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/mapper/ClientMapper.java",
      "content": "package org.mustapha.smartShop.mapper;\n\nimport org.mapstruct.Mapper;\nimport org.mapstruct.Mapping;\nimport org.mapstruct.MappingTarget;\nimport org.mustapha.smartShop.dto.request.ClientDtoRequest;\nimport org.mustapha.smartShop.dto.response.ClientDtoResponse;\nimport org.mustapha.smartShop.model.Client;\n\nimport java.util.stream.Collectors;\n\n@Mapper(componentModel = \"spring\")\npublic interface ClientMapper {\n\n    @Mapping(target = \"id\", ignore = true)\n    @Mapping(target = \"orderList\", ignore = true)\n    @Mapping(target = \"user\", ignore = true)\n    // tery to fix error the name is send null\n//    @Mapping(source = \"name\", target = \"name\")\n//    @Mapping(source = \"email\", target = \"email\")\n//    @Mapping(source = \"loyaltyLevel\", target = \"loyaltyLevel\")\n    Client toEntity(ClientDtoRequest clientDtoRequest);\n\n    @Mapping(target = \"orderIds\", expression = \"java(client.getOrderList() == null ? null : client.getOrderList().stream().map(o -> o.getId()).collect(java.util.stream.Collectors.toList()))\")\n // to avoid this we comment those\n /*\n\n    \"id\": 10,\n    \"username\": \"ahemd\",\n    \"role\": \"CLIENT\",\n    \"client\": {\n        \"id\": 7,\n        \"name\": \"youcode\",\n        \"email\": \"youcode@gmail.com\",\n        \"loyaltyLevel\": \"GOLD\",\n        \"orderIds\": [],\n        \"username\": \"ahemd\",\n        \"role\": \"CLIENT\"\n    }\n}\n  */\n//    @Mapping(target = \"username\", expression = \"java(client.getUser().getUsername())\")\n//    @Mapping(target = \"role\", expression = \"java(client.getUser().getRole())\")\n    ClientDtoResponse toDto(Client client);\n\n    @Mapping(target = \"id\", ignore = true)\n    @Mapping(target = \"orderList\", ignore = true)\n    @Mapping(target = \"user\", ignore = true)\n    void updateClientFromDto(ClientDtoRequest dto, @MappingTarget Client entity);\n}",
      "info": {
        "size": 1764,
        "last_modified": "2025-11-28T12:09:28.191934219",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/mapper/UserMapper.java",
      "content": "package org.mustapha.smartShop.mapper;\n\nimport org.mapstruct.Mapper;\nimport org.mapstruct.*;\nimport org.mustapha.smartShop.dto.request.UserDtoRequest;\nimport org.mustapha.smartShop.dto.response.UserDtoResponse;\nimport org.mustapha.smartShop.model.User;\n\n@Mapper(componentModel = \"spring\", uses = {ClientMapper.class})\npublic interface UserMapper {\n\n\n    @Mapping(target = \"id\", ignore = true)\n    @Mapping(target = \"client\", ignore = true) // if the client is null we ignore that because we handle it in the service\n    User toEntity(UserDtoRequest userDtoRequest);\n\n    UserDtoResponse toDto(User user);\n\n\n}\n",
      "info": {
        "size": 609,
        "last_modified": "2025-11-28T12:09:28.196255193",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/controller/UserController.java",
      "content": "package org.mustapha.smartShop.controller;\n\nimport jakarta.validation.Valid;\nimport lombok.RequiredArgsConstructor;\nimport org.mustapha.smartShop.dto.request.UserDtoRequest;\nimport org.mustapha.smartShop.dto.response.UserDtoResponse;\nimport org.mustapha.smartShop.service.UserService;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@RequiredArgsConstructor\n@RequestMapping(\"/v1/users\")\n\n// add pagiantaion\npublic class UserController {\n    private final UserService userService;\n\n    @PostMapping\n    public ResponseEntity<UserDtoResponse>createUser(@Valid @RequestBody UserDtoRequest userDtoRequest){\n        UserDtoResponse createdUser =  userService.createUser(userDtoRequest);\n        return ResponseEntity.status(HttpStatus.CREATED).body(createdUser);\n    }\n\n    @PutMapping(\"/{id}\")\n    public ResponseEntity<UserDtoResponse>updateUser(\n            @PathVariable Long id,\n            @Valid @RequestBody UserDtoRequest userDtoRequest\n    )\n    {\n        UserDtoResponse updatedUser = userService.updateUser(id, userDtoRequest);\n        return ResponseEntity.ok(updatedUser);\n    }\n\n\n    @GetMapping(\"/{id}\")\n    public ResponseEntity<UserDtoResponse>getById( @PathVariable Long id){\n        UserDtoResponse userFind = userService.getUerById(id);\n        return ResponseEntity.ok(userFind);\n    }\n\n    @GetMapping\n    public ResponseEntity<List<UserDtoResponse>> getAllUsers() {\n        List<UserDtoResponse> users = userService.getAllUsers();\n        return ResponseEntity.ok(users);\n    }\n\n    @DeleteMapping(\"/{id}\")\n    public ResponseEntity<UserDtoResponse>deleteUser(@PathVariable Long id){\n\n        userService.deleteUser(id);\n        return ResponseEntity.noContent().build();\n\n    }\n\n}\n",
      "info": {
        "size": 1836,
        "last_modified": "2025-11-28T12:09:28.203064016",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/enums/OrderStatus.java",
      "content": "package org.mustapha.smartShop.enums;\n\npublic enum OrderStatus {\n    PENDING,\n    CONFIRMED,\n    CANCELED,\n    REJECTED\n}\n",
      "info": {
        "size": 122,
        "last_modified": "2025-11-28T12:09:28.209197848",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/enums/LoyaltyLevel.java",
      "content": "package org.mustapha.smartShop.enums;\n\npublic enum LoyaltyLevel {\n    BRONZE,\n    SILVER,\n    GOLD,\n    PLATINUM\n}\n",
      "info": {
        "size": 115,
        "last_modified": "2025-11-28T12:09:28.213410746",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/enums/PaymentStatus.java",
      "content": "package org.mustapha.smartShop.enums;\n\npublic enum PaymentStatus {\n    PENDING,\n    RECEIVED,\n    REJECTED\n}\n",
      "info": {
        "size": 109,
        "last_modified": "2025-11-28T12:09:28.217567401",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/enums/UserRole.java",
      "content": "package org.mustapha.smartShop.enums;\n\npublic enum UserRole {\n    ADMIN,\n    CLIENT\n}\n",
      "info": {
        "size": 86,
        "last_modified": "2025-11-28T12:09:28.221597049",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/exception/UnauthorizedException.java",
      "content": "package org.mustapha.smartShop.exception;\n\npublic class UnauthorizedException extends RuntimeException {\n    public UnauthorizedException(String message) {\n        super(message);\n    }\n}\n",
      "info": {
        "size": 188,
        "last_modified": "2025-11-28T12:09:28.228740308",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/exception/ResourceNotFoundException.java",
      "content": "package org.mustapha.smartShop.exception;\n\npublic class ResourceNotFoundException extends RuntimeException {\n    public ResourceNotFoundException(String message) {\n        super(message);\n    }\n}\n",
      "info": {
        "size": 196,
        "last_modified": "2025-11-28T12:09:28.233778201",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/exception/GlobalExceptionHandler.java",
      "content": "package org.mustapha.smartShop.exception;\n\nimport jakarta.servlet.http.HttpServletRequest;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.MethodArgumentNotValidException;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.bind.annotation.RestControllerAdvice;\n\n@RestControllerAdvice\npublic class GlobalExceptionHandler {\n\n    // 400 - Validation errors\n    @ExceptionHandler(MethodArgumentNotValidException.class)\n    public ResponseEntity<ErrorResponse> handleValidationException(MethodArgumentNotValidException ex,\n                                                                   HttpServletRequest request) {\n        String message = ex.getBindingResult()\n                .getFieldErrors()\n                .stream()\n                .map(e -> e.getField() + \": \" + e.getDefaultMessage())\n                .findFirst()\n                .orElse(ex.getMessage());\n\n        return ResponseEntity.badRequest()\n                .body(ErrorResponse.build(HttpStatus.BAD_REQUEST, message, request.getRequestURI()));\n    }\n\n    // 404 - Resource not found\n    @ExceptionHandler(ResourceNotFoundException.class)\n    public ResponseEntity<ErrorResponse> handleNotFound(ResourceNotFoundException ex, HttpServletRequest request) {\n        return ResponseEntity.status(HttpStatus.NOT_FOUND)\n                .body(ErrorResponse.build(HttpStatus.NOT_FOUND, ex.getMessage(), request.getRequestURI()));\n    }\n\n    // 422 - Business rule violation\n    @ExceptionHandler(BusinessRuleException.class)\n    public ResponseEntity<ErrorResponse> handleBusinessRule(BusinessRuleException ex, HttpServletRequest request) {\n        return ResponseEntity.status(HttpStatus.UNPROCESSABLE_ENTITY)\n                .body(ErrorResponse.build(HttpStatus.UNPROCESSABLE_ENTITY, ex.getMessage(), request.getRequestURI()));\n    }\n\n    // 401 - Unauthorized\n    @ExceptionHandler(UnauthorizedException.class)\n    public ResponseEntity<ErrorResponse> handleUnauthorized(UnauthorizedException ex, HttpServletRequest request) {\n        return ResponseEntity.status(HttpStatus.UNAUTHORIZED)\n                .body(ErrorResponse.build(HttpStatus.UNAUTHORIZED, ex.getMessage(), request.getRequestURI()));\n    }\n\n    // 403 - Forbidden\n    @ExceptionHandler(ForbiddenException.class)\n    public ResponseEntity<ErrorResponse> handleForbidden(ForbiddenException ex, HttpServletRequest request) {\n        return ResponseEntity.status(HttpStatus.FORBIDDEN)\n                .body(ErrorResponse.build(HttpStatus.FORBIDDEN, ex.getMessage(), request.getRequestURI()));\n    }\n\n    // 500 - Internal server error (catch-all)\n    @ExceptionHandler(Exception.class)\n    public ResponseEntity<ErrorResponse> handleException(Exception ex, HttpServletRequest request) {\n        ex.printStackTrace(); // useful for debug\n        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\n                .body(ErrorResponse.build(HttpStatus.INTERNAL_SERVER_ERROR, ex.getMessage(), request.getRequestURI()));\n    }\n}\n",
      "info": {
        "size": 3083,
        "last_modified": "2025-11-28T12:09:28.23872354",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/exception/BusinessRuleException.java",
      "content": "package org.mustapha.smartShop.exception;\n\npublic class BusinessRuleException extends RuntimeException {\n    public BusinessRuleException(String message) {\n        super(message);\n    }\n}\n",
      "info": {
        "size": 188,
        "last_modified": "2025-11-28T12:09:28.243415252",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/exception/ErrorResponse.java",
      "content": "package org.mustapha.smartShop.exception;\n\nimport com.fasterxml.jackson.annotation.JsonFormat;\nimport lombok.Builder;\nimport lombok.Data;\nimport org.springframework.http.HttpStatus;\n\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\npublic class ErrorResponse {\n\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = \"yyyy-MM-dd HH:mm:ss\")\n    private LocalDateTime timestamp;\n\n    private int status;\n\n    private String error;\n\n    private String message;\n\n    private String path;\n\n    public static ErrorResponse build(HttpStatus status, String message, String path) {\n        return ErrorResponse.builder()\n                .timestamp(LocalDateTime.now())\n                .status(status.value())\n                .error(status.getReasonPhrase())\n                .message(message)\n                .path(path)\n                .build();\n    }\n}\n",
      "info": {
        "size": 848,
        "last_modified": "2025-11-28T12:09:28.247956225",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/exception/ForbiddenException.java",
      "content": "package org.mustapha.smartShop.exception;\n\npublic class ForbiddenException extends RuntimeException {\n    public ForbiddenException(String message) {\n        super(message);\n    }\n}\n",
      "info": {
        "size": 182,
        "last_modified": "2025-11-28T12:09:28.252558545",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/exception/ValidationException.java",
      "content": "package org.mustapha.smartShop.exception;\n\npublic class ValidationException extends RuntimeException {\n    public ValidationException(String message) {\n        super(message);\n    }\n}\n",
      "info": {
        "size": 184,
        "last_modified": "2025-11-28T12:09:28.257241095",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/dto/response/ClientDtoResponse.java",
      "content": "package org.mustapha.smartShop.dto.response;\n\nimport lombok.Data;\nimport org.mustapha.smartShop.enums.LoyaltyLevel;\nimport org.mustapha.smartShop.enums.UserRole;\n\nimport java.util.List;\n\n@Data\npublic class ClientDtoResponse {\n\n    private Long id;\n\n    private String name;\n\n    private String email;\n\n    private LoyaltyLevel loyaltyLevel;\n\n    private List<Long> orderIds;\n\n\n    // data related with user\n    private String username;\n    private UserRole role;\n\n\n}\n",
      "info": {
        "size": 467,
        "last_modified": "2025-11-28T12:09:28.262991068",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/dto/response/UserDtoResponse.java",
      "content": "package org.mustapha.smartShop.dto.response;\n\nimport lombok.Data;\nimport org.mustapha.smartShop.enums.UserRole;\n\n@Data\npublic class UserDtoResponse {\n\n    private Long id;\n\n    private String username;\n\n    private UserRole role;\n\n    private ClientDtoResponse client; // if it's client\n}\n",
      "info": {
        "size": 289,
        "last_modified": "2025-11-28T12:09:28.266580075",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/dto/request/UserDtoRequest.java",
      "content": "package org.mustapha.smartShop.dto.request;\n\nimport jakarta.persistence.Column;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\nimport lombok.Data;\nimport org.mustapha.smartShop.enums.UserRole;\n\n@Data\npublic class UserDtoRequest {\n\n    @NotBlank(message = \"username is required\")\n    @Column(nullable = false)\n    private String username;\n\n    @NotBlank(message = \"the password is required\")\n    @Size(min = 5, message = \"password must be at least 5 characters\")\n    private String password;\n\n    @NotNull(message = \"role is required\")\n    private UserRole role;\n\n    private ClientDtoRequest client; // null able\n}\n",
      "info": {
        "size": 707,
        "last_modified": "2025-11-28T12:09:28.272057747",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/dto/request/ClientDtoRequest.java",
      "content": "package org.mustapha.smartShop.dto.request;\n\nimport jakarta.persistence.EnumType;\nimport jakarta.persistence.Enumerated;\nimport jakarta.validation.constraints.Email;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport lombok.Data;\nimport org.aspectj.weaver.ast.Not;\nimport org.mustapha.smartShop.enums.LoyaltyLevel;\nimport org.mustapha.smartShop.enums.UserRole;\n\nimport java.util.List;\n\n@Data\npublic class ClientDtoRequest {\n\n    @NotBlank(message = \"name is required\")\n    @NotNull\n    private String name;\n\n    @NotBlank(message = \"email is required\")\n    @Email\n    private String email;\n\n    @NotNull(message = \"loyalty level is required\")\n    private LoyaltyLevel loyaltyLevel;\n\n\n    private List<Long> orderIds;\n\n\n}\n",
      "info": {
        "size": 772,
        "last_modified": "2025-11-28T12:09:28.27566595",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/repository/ClientRepository.java",
      "content": "package org.mustapha.smartShop.repository;\n\nimport org.mustapha.smartShop.model.Client;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.Optional;\n\n@Repository\npublic interface ClientRepository extends JpaRepository<Client, Long> {\n    Optional<Client> findByEmail(String email);\n\n}\n",
      "info": {
        "size": 364,
        "last_modified": "2025-11-28T12:09:28.284358451",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/main/java/org/mustapha/smartShop/repository/UserRepository.java",
      "content": "package org.mustapha.smartShop.repository;\n\nimport org.mustapha.smartShop.model.User;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.Optional;\n\n@Repository\npublic interface UserRepository extends JpaRepository<User, Long> {\n\n        Optional<User>findByUsername(String username);\n\n    Optional<User> findById(Long id);\n}\n",
      "info": {
        "size": 404,
        "last_modified": "2025-11-28T12:09:28.28827314",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src/test/java/org/mustapha/smartShop/SmartShopApplicationTests.java",
      "content": "package org.mustapha.smartShop;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.boot.test.context.SpringBootTest;\n\n@SpringBootTest\nclass SmartShopApplicationTests {\n\n\t@Test\n\tvoid contextLoads() {\n\t}\n\n}\n",
      "info": {
        "size": 217,
        "last_modified": "2025-11-28T12:09:28.303401708",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    }
  ]
}